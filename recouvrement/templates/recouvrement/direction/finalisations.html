{% extends 'recouvrement/layouts/base.html' %} {% load static %} {% block content %}

<div class="margin-bottom-30">
  <div class="row">
    <div class="col-md-12">
      <ul class="nav nav-pills">
        <li class="active">
          <a href="#">Nombre de contacts<span class="badge">342</span></a>
        </li>
        <li class="active">
          <a href="#">Liste des injoignables<span class="badge">26</span></a>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="templatemo-alerts">
      <div class="row">
        <div class="col-md-12">
          <div class="alert alert-info alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert">
              <span aria-hidden="true">&times;</span
              ><span class="sr-only">Close</span>
            </button>
            Tout est en ordre vous pouvez continuer.
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="templatemo-alerts">
      <div class="row">
        <div class="col-md-12">
          <div class="alert alert-warning alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert">
              <span aria-hidden="true">&times;</span
              ><span class="sr-only">Fermer</span>
            </button>
            Vous avez 2 messages en attente.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<br /><br />
<div class="row">
  <div class="col-md-12">
    <div class="panel-group" id="accordion">
      <!-- <form class="" role="form" id="templatemo-preferences-form"> -->
      <!-- DOSSIER COMMERCIEUX -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseOne"
            >
              <span class="badge">1</span>&nbsp; Dossier commerciaux -
              Propriétaires terriens
            </a>
          </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse in">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                          <a href="generatepdf" target="blank"></a>
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ATTESTATION DE FIN DE PAYMENT -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseTwo"
            >
              <span class="badge">2</span>&nbsp; Attestations de fin de
              paiements
            </a>
          </h4>
        </div>
        <div id="collapseTwo" class="panel-collapse collapse">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12 margin-bottom-15">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                          <a href="generatepdf" target="blank">
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </a>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- VERIFICATION DE FIN DE PAIEMENT -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseThree"
            >
              <span class="badge">3</span>&nbsp; Vérifications fin de paiement
            </a>
          </h4>
        </div>
        <div id="collapseThree" class="panel-collapse collapse">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12 margin-bottom-15">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                          <a href="generatepdf" target="blank">
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </a>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- CERTIFICAT DE FELICITATIONS -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseFour"
            >
              <span class="badge">4</span>&nbsp; Certificats de félicitations
            </a>
          </h4>
        </div>
        <div id="collapseFour" class="panel-collapse collapse">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12 margin-bottom-15">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                        <a href="generatepdf" target="blank">
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </a>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- LIVRAISON PLAN DE MASSE LOCAL -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseFive"
            >
              <span class="badge">5</span>&nbsp; Livraisons plans de masse local
            </a>
          </h4>
        </div>
        <div id="collapseFive" class="panel-collapse collapse">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12 margin-bottom-15">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                          <a href="generatepdf" target="blank">
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </a>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ETAT DE ARCHIVES -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseSix"
            >
              <span class="badge">6</span>&nbsp; Etat des archives
            </a>
          </h4>
        </div>
        <div id="collapseSix" class="panel-collapse collapse">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12 margin-bottom-15">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                        <a href="generatepdf" target="blank">
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </a>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- CERTIFICATE D'ATTRIBUTION -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a
              data-toggle="collapse"
              data-parent="#accordion"
              href="#collapseSeven"
            >
              <span class="badge">7</span>&nbsp; Certificats d'attribution
            </a>
          </h4>
        </div>
        <div id="collapseSeven" class="panel-collapse collapse">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12 margin-bottom-15">
                <form class="navbar-form">
                  <input
                    type="text"
                    class="form-control"
                    id="templatemo_search_box"
                    placeholder="..."
                  />
                  <span class="btn btn-default">Rechercher</span>
                </form>

                
                <div class="btn-group pull-right" id="templatemo_sort_btn">

                  <select onchange="sort_etat(this.value)" style="border: 1px solid #ddd; padding-top: .5rem; padding-bottom: .5rem; padding-left: 1rem; font-size: 1.25rem;" class="form-select">
                    <option disabled selected value="">Sort By</option>
                    <option value="">All</option>
                    <option value="uid">N° client</option>
                    <option value="phone_1">Téléphone</option>
                    <option value="nom">Nom</option>
                    <option value="prenom">Prénom</option>
                    <option value="statut">Statut</option>
                    <option value="dernier_appel">Dernier Paiement</option>
                    <option value="coeff_recouv">Coeff recouvr</option>
                    <option value="appele_recouvre">Appelé & récouvré</option>
                  </select>
                </div>

                <div class="table-responsive">
                  <table id="table" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>N° client</th>
                        <th>Téléphone</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>N°dossier</th>
                        <th>Statut</th>
                        <th>Dernier Paiement</th>
                        <th>Coeff recouvr</th>
                        <th>Appelé & récouvré</th>
                        <th>Dernier appel</th>
                        <th>Delocaliser</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for dossier in all_dossier %}
                      <!-- <tr class="danger"> -->
                      <td>{{ dossier.client.uid }}</td>
                      <td>{{ dossier.client.phone_1 }}</td>
                      <td>{{ dossier.client.nom }}</td>
                      <td>{{ dossier.client.prenom }}</td>
                      <td>{{ dossier.uid }}</td>
                      <td>{{ dossier.statut }}</td>
                      <td>{{ dossier.date_dernier_paiement }}</td>
                      <td>{{ dossier.coeff_recouv }}</td>
                      <td>{{ dossier.appele_recouvre }}</td>
                      <td>{{ dossier.dernier_appel }}</td>
                      <td>
                        <!-- Split button -->
                        <div classbtn-group>
                          <a href="generatepdf" target="blank">
                        <button
                          type="button"
                          class="btn btn-default"
                          data-toggle="modal"
                          data-target="#confirmPlan"
                        >
                          Ouvrir
                        </button>
                      </a>
                      </td>
                    <!-- </tr> -->
                    {% endfor  %}
                    </tbody>
                  </table>
                </div>
                <ul class="pagination pull-right">
                  <li class="disabled" onclick="prev()" id="prev"><a >&laquo;</a></li>
                  {% for i in page_list %}
                  <li class="{% if i == page %}active {% endif %}">
                    <a class="btn" onclick="paginate_table('{{ i }}')">{{ i }} <span class="sr-only">(current)</span></a>
                  </li>
                  {% endfor %}
                  <li id="next" onclick="next()"><a >&raquo;</a></li>
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    {% endblock %} {% block modal %}

    <div
      class="modal fade"
      id="confirmModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="myModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span
              ><span class="sr-only">Close</span>
            </button>
            <h4 class="modal-title" id="myModalLabel">
              Are you sure you want to sign out?
            </h4>
          </div>
          <div class="modal-footer">
            <a href="../logout" class="btn btn-primary">Yes</a>
            <button type="button" class="btn btn-default" data-dismiss="modal">
              No
            </button>
          </div>
        </div>
      </div>
    </div>
    {% endblock %} {% block scripts %}
    <script  type="text/javascript">
    
      // PAGINATOR CODE BELLOW
        
        function paginate_table(page,$event) {
            document.getElementById('templatemo_search_box').value = '';
          if(page > 1) {
            document.getElementById('prev').classList = '';
          }
        
          if(page == 1) {
            document.getElementById('prev').classList = 'disabled'
          }
        
        
        
          //  Write Logic to change current active button
          
            all_childrens = event.target.parentElement.parentElement.children
            for(let i = 0; i < all_childrens.length; i++){
                if(all_childrens[i].classList.contains('active')){
                  all_childrens[i].classList = '';
                }
            }
           
            event.target.parentElement.classList = 'active'
        
            // Total Pages Calculation Bellow
            let total = all_childrens.length - 2;
        
            if(page == total) {
              document.getElementById('next').classList = 'disabled'
            }
        
            if(page < total) {
              document.getElementById('next').classList = ''
            }
        
            let param = `page=${page}`
            send_paginate_request(param)
        }
        function next($event) {
          let all_childrens = event.target.parentElement.parentElement.children
          let setactive = 0;
          prevactive = 0;
        
          for(let i = 0; i < all_childrens.length; i++){
                if(all_childrens[i].classList.contains('active')){
                  prevactive = i;
                  all_childrens[i].classList = '';
                  setactive = i+1;
                }
            }
        
            
          let total = all_childrens.length - 2;
          
          if(setactive > total) {
            console.log('SET ACTIVE IS GREATER THAN TOTAL')
            all_childrens[prevactive].classList = 'active';
        
          }else {
        
            if(setactive > 1) {
              document.getElementById('prev').classList = '';
            }
        
        
            if(setactive == total) {
              document.getElementById('next').classList = 'disabled'
            }
        
        
            all_childrens[setactive].classList = 'active';
            let param = `page=${setactive}`
            send_paginate_request(param)
          }
        
        }
        
        function prev($event) {
          let all_childrens = event.target.parentElement.parentElement.children
          let setactive = 0;
          let prevactive = 0;
        
          for(let i = 0; i < all_childrens.length; i++){
                if(all_childrens[i].classList.contains('active')){
                  prevactive = i;
                  all_childrens[i].classList = '';
                  setactive = i-1;
                }
            }
        
            
          let total = all_childrens.length - 2;
          
          if(setactive < 1) {
            console.log('SET ACTIVE IS LESSER THAN ONE')
            all_childrens[prevactive].classList = 'active';
        
          }else {
        
            if(setactive < total) {
              document.getElementById('next').classList = '';
            }
        
            if(setactive == 1) {
              document.getElementById('prev').classList = 'disabled'
            }
        
        
            all_childrens[setactive].classList = 'active';
            let param = `page=${setactive}`
            send_paginate_request(param)
          }
        
        }
        
        function send_paginate_request(param) {
            $.ajax({
                method: 'GET',
                url: 'api/paginate_finalisations?' + param,
                beforeSend: function() {
                    console.log('Before Send')
                },
        
                success: function(result) {
                  console.log('after send')
                  console.log(result)
                    update_table_paginate(result);
                    
                },
        
                error: function() {
                    console.log('error')
                }
            })
        }
        
        function update_table_paginate(data) {
            let row;
            let all_rows = '';
            // console.log('UPDATE TABLE PAGINATE')
            // console.log(data[0].client)
            Object.keys(data).forEach((key,index) => {
           
                elem = data[key];
                row = ''
                row = `<tr><td> ${elem.client.uid} </td> <td>${elem.client.phone_1}</td> <td>${elem.client.nom}</td> <td>${elem.client.prenom}</td> <td>${elem['uid']}</td> <td>${elem['statut']}</td> <td> ${elem['date_dernier_paiement']} </td> <td>${elem['coeff_recouv']}</td> <td>${elem['appele_recouvre']}</td> <td>${elem['dernier_appel']}</td> <td> <div class="btn-group"> <button type="button" class="btn btn-default" data-toggle="modal" data-target="#modifPlan">  Modifier </button> </div> </td>  <td> <div class = "btn-group"> <button type="button" class="btn btn-info" data-toggle="modal" data-target="#confirmPlan">  Ouvrir </button> </div> </td>  <td><a href="#" class="btn btn-link">Consulter</a></td>`
                all_rows = all_rows + row;
            });
        
            $("#table tbody").html(all_rows)
        }
        
      // END OF PAGINATOR
      
      // TABLE FEATURES
        
      function sort_etat(sort_type) {
            let param = `${sort_type}=${sort_type}`
            send_request(param);
        }
        
        function find_cpml() {
            let search_query = document.getElementById('templatemo_search_box').value;
            let param = `search_table=${search_query}`
            send_request(param);
        }
      
        function send_request(param) {
            $.ajax({
                method: 'GET',
                url: 'api/get_finalisations?' + param,
                beforeSend: function() {
                    console.log('Before Send')
                },
        
                success: function(result) {
                    update_table(result);
                    console.log('after send')
                },
        
                error: function() {
                    console.log('error')
                }
            })
        }
        
        function update_table(data) {
            console.log('Table Update')
            let row;
            let all_rows = '';
          
            Object.keys(data).forEach((key,index) => {
                elem = data[key];
                console.log('data bellow')
                console.log(data[index])
                app = data[index];
                row = `<tr><td> ${elem.client.uid} </td> <td>${elem.client.phone_1}</td> <td>${elem.client.nom}</td> <td>${elem.client.prenom}</td> <td>${elem['uid']}</td> <td>${elem['statut']}</td> <td> ${elem['date_dernier_paiement']} </td> <td>${elem['coeff_recouv']}</td> <td>${elem['appele_recouvre']}</td> <td>${elem['dernier_appel']}</td> <td> <div class="btn-group"> <button type="button" class="btn btn-default" data-toggle="modal" data-target="#modifPlan">  Modifier </button> </div> </td>  <td> <div class = "btn-group"> <button type="button" class="btn btn-info" data-toggle="modal" data-target="#confirmPlan">  Ouvrir </button> </div> </td>  <td><a data-target="#showFacture" onclick="show_facture(${elem['uid']})" data-toggle="modal" class="btn btn-link">Consulter</a></td>`
                all_rows = all_rows + row;
            });
            $("#table tbody").html(all_rows)
        }
      
      // END TABLE FEATURES
      
        function get_facture(id) {
          // This is the function that will make the api call and get facture
          let param = "id="+id
          let result = null;
          
          $.ajax({
                method: 'GET',
                url: 'facture/api/get_facture?' + param,
                beforeSend: function() {
                    console.log('Before Send')
                },
        
                success: function(result) {
                  // CALL FUNCTION BELLOW TO UPDATE MODAL WITH FACTURE DETAILS
                  udpate_facture_modal(result.facture)
                },
        
                error: function() {
                    console.log('error')
                }
            })
      
        }
        function show_facture(id) {
          // CALL GET FACTURE FUNCTION TO GO AND GET FCTURE
         get_facture(id)
        }
      
    </script>
    {% endblock %}
  </div>
</div>
